# Session Learnings - 2026-02-13

## 18:32 - Security: Google Calendar credentials should be in .env

**What happened:** During calendar setup verification, Mick noticed Google OAuth credentials were stored as JSON files in `System/.credentials/` rather than in `.env` file. This violated the security protocol in CLAUDE.md that states "ALL API keys, tokens, and credentials MUST be stored in .env file."

**Why it matters:**
- Inconsistent security approach creates confusion about where to store secrets
- File-based credentials are easier to accidentally commit to git
- .env is the single source of truth for all secrets across the system

**Suggested fix:** âœ… COMPLETED
- Moved `GOOGLE_CLIENT_ID`, `GOOGLE_CLIENT_SECRET`, and `GOOGLE_PROJECT_ID` to `.env`
- Updated `core/mcp/calendar_server.py` to read from environment variables instead of file
- Sanitized `google_calendar_credentials.json` (replaced secrets with "MOVED_TO_ENV" placeholders)
- Added dotenv loading to calendar server
- Updated setup documentation to reflect .env-based approach

**Status:** resolved

---

## 18:35 - Google OAuth special case handled correctly

**What happened:** Google OAuth credentials are typically stored as JSON files (standard practice), but we successfully refactored to use .env variables while maintaining compatibility with Google Auth libraries.

**Why it matters:**
- Shows that even complex OAuth flows can follow the .env pattern
- Sets precedent for other OAuth integrations (GitHub, Slack, etc.)
- Demonstrates defense-in-depth approach

**Pattern for future OAuth integrations:**
1. Extract client_id and client_secret to .env
2. Construct client_config dictionary from env vars in code
3. Use `from_client_config()` instead of `from_client_secrets_file()`
4. Keep token.pickle for cached access tokens (binary file, auto-managed)

**Status:** documented

---

## 18:40 - Granola integration parked (user doesn't use it)

**What happened:** During setup audit, discovered Granola MCP is configured but Mick doesn't use Granola for meeting transcription.

**Why it matters:**
- Prevents wasted time on unused integrations
- MCP stays configured (no harm) but inactive
- Can revisit if/when Mick starts using Granola

**Action:** Added note to session log and setup audit. No immediate action needed.

**Status:** noted

---

## 18:43 - Setup audit workflow successful

**What happened:** Created comprehensive setup audit using general-purpose agent to review all documentation, compare against current state, and identify gaps. Worked very well.

**Why it matters:**
- Shows effective use of agents for complex analysis tasks
- Produced actionable breakdown (Required/Recommended/Optional)
- Prevented "are we done yet?" ambiguity

**Pattern for future:** When user asks "what's left to do" or "am I set up?", use agent-based audit rather than manual checking.

**Status:** documented

---
